<Window x:Class="_3UDBittor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:_3UDBittor.ViewModels"
        xmlns:comp="clr-namespace:_3UDBittor.Views.Components"
        Title="Erreserba Sistema"
        Height="720" Width="1200"
        Background="#F4F7FB"
        WindowStartupLocation="CenterScreen">

    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="#1E2A38">
            <StackPanel Margin="20">
                <TextBlock Text="🚍 Erreserba Sistema"
                           Foreground="White"
                           FontSize="20"
                           FontWeight="Bold"
                           Margin="0,0,0,24"/>

                <TextBlock Text="Garraio mota:" Foreground="#D0D3D8" FontWeight="SemiBold"/>
                <ComboBox ItemsSource="{Binding TransportModes}"
                          SelectedItem="{Binding SelectedMode}"
                          Width="200" Height="30" Margin="0,6,0,24"/>

                <Button Content="Erreserbatu"
                        Command="{Binding ReserveCommand}"
                        Background="#3498DB"
                        Foreground="White"
                        Height="38"
                        BorderThickness="0"
                        Margin="0,0,0,10"
                        FontWeight="SemiBold"
                        Cursor="Hand"/>

                <Button Content="Utzi"
                        Command="{Binding CancelCommand}"
                        Background="#E74C3C"
                        Foreground="White"
                        Height="38"
                        BorderThickness="0"
                        FontWeight="SemiBold"
                        Cursor="Hand"/>

                <StackPanel Margin="0,30,0,0">
                    <TextBlock Text="Egunaren hautapena" Foreground="White" FontWeight="Bold" Margin="0,0,0,8"/>
                    <DatePicker SelectedDate="{Binding SelectedDate}" Width="200" Margin="0,4"/>
                    <StackPanel Orientation="Horizontal" Margin="0,4">
                        <TextBox Text="{Binding SelectedTime, StringFormat='hh\\:mm', Mode=TwoWay}"
                                 Width="80" />
                        <TextBlock Text=" (HH:mm)" Foreground="#BBB" FontSize="11" Margin="6,4,0,0"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Border>

        <Grid Grid.Column="1" Margin="24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <TextBlock Text="Eserleku mapa" 
                       FontSize="20" 
                       FontWeight="Bold"
                       Foreground="#2C3E50"
                       Margin="0,0,0,12"/>

            <Border Grid.Row="1" Background="White" CornerRadius="12" Padding="20" 
                    BorderBrush="#DDE1E6" BorderThickness="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="240"/>
                    </Grid.RowDefinitions>

                    <comp:EserlekuControl Seats="{Binding CurrentZone.Seats}"
                                         SeatClickCommand="{Binding SeatClickCommand}"
                                         Columns="{Binding Columns}"
                                         Grid.Row="0"
                                         Margin="0,0,0,16"/>

                    <Border Grid.Row="1" Background="#F8FAFC" CornerRadius="8" Padding="12" BorderBrush="#E0E0E0" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="Uneko erreserbak"
                                       FontWeight="Bold"
                                       FontSize="16"
                                       Foreground="#2C3E50"
                                       Margin="0,0,0,8"/>

                            <ScrollViewer Height="180">
                                <ItemsControl ItemsSource="{Binding CurrentZone.Seats}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Margin="0,2" Padding="6" Background="White"
                                                    BorderBrush="#E1E4E8" BorderThickness="1" CornerRadius="6">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="{Binding Id}" Width="60" FontWeight="Bold"/>
                                                    <TextBlock Text="{Binding Status}" Width="80"/>
                                                    <TextBlock Text="{Binding ReservedFor, StringFormat='{}{0:G}'}"/>
                                                </StackPanel>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
